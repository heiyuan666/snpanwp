# 零九CDN云盘上传插件

**插件名称**：零九CDN云盘上传
**插件版本**：1.2.0 🔧
**作者**：零九CDN
**作者网站**：[www.09cdn.com](https://www.09cdn.com)
**适用版本**：WordPress 5.0+
**测试版本**：WordPress 6.4

## 🔧 v1.2.0 重要修复

### 重复上传问题修复
- ✅ **修复重复上传**：解决图片上传时生成两张图片到云盘的问题
- � **上传锁定机制**：防止同一文件的并发上传冲突
- 🧹 **重复检查机制**：添加处理标记和云盘URL检查
- � **修复工具**：专用的重复上传问题检查和修复工具

### 本地文件管理修复
- ✅ **修复"不保存副本"功能**：解决设置不生效的问题
- 🗑️ **安全删除机制**：多重验证确保删除操作的安全性
- 📷 **图片多尺寸处理**：正确删除WordPress图片的所有尺寸版本
- 📊 **状态管理工具**：完整的本地文件状态检查和统计

### 用户体验改进
- � **改进的设置说明**：更清晰的选项说明和安全警告
- ⏸️ **暂停/继续支持**：批量操作支持暂停和继续
- � **详细操作反馈**：清晰的成功/失败状态提示
- 🔗 **快速访问链接**：新增状态检查和修复工具链接

## 插件简介

零九CDN云盘上传是一个专为 WordPress 开发的云盘上传插件。插件的主要功能是自动将 WordPress 上传的文件同步到云盘存储，并自动替换为云盘直链，提供 CDN 加速和更好的文件管理体验。

## 主要功能

### 🚀 自动云盘上传
- **智能上传**: WordPress上传图片时自动同步到云盘
- **链接替换**: 自动将本地文件链接替换为云盘直链
- **支持格式**: JPEG、PNG、GIF、WebP图片文件
- **CDN加速**: 利用云盘CDN提升图片加载速度

### ⚙️ 灵活配置
- **一键启用**: 插件激活后默认开启云盘功能
- **自动替换**: 可选择是否自动替换新上传的文件
- **本地备份**: 可选择是否保留本地文件副本
- **文件夹管理**: 支持指定云盘上传目录

### 🔧 批量管理
- **一键替换**: 批量将现有媒体库文件上传到云盘
- **状态显示**: 媒体库显示每个文件的云盘状态
- **手动上传**: 支持单个文件手动上传到云盘
- **进度跟踪**: 实时显示批量处理进度

### 🔒 安全可靠
- **API集成**: 完整集成云盘系统API
- **连接测试**: 一键测试云盘连接状态
- **错误处理**: 详细的错误日志和异常处理
- **数据安全**: 支持本地文件备份策略

## 安装使用

### 1. 插件安装
1. 下载插件文件
2. 上传到 `/wp-content/plugins/` 目录
3. 在WordPress后台激活插件

### 2. 基本配置
1. 进入 **设置 → DMY Cloud Upload**
2. 填入您的云盘 AID 和 KEY
3. 点击"测试云盘连接"验证配置
4. 启用自动上传功能

### 3. 开始使用
- **自动模式**: 上传图片自动使用云盘链接
- **手动模式**: 在媒体库手动上传文件到云盘
- **批量处理**: 使用一键替换功能处理现有文件

## 配置说明

### 基本设置
- **启用云盘上传**: 控制插件总开关
- **自动替换上传文件**: 新上传文件自动同步到云盘
- **保留本地文件**: 上传到云盘后是否保留本地副本

### 云盘配置
- **云盘 AID**: 您的云盘用户秘钥 AID
- **云盘 KEY**: 您的云盘用户秘钥 KEY  
- **上传文件夹ID**: 指定上传目录（可选）

## 文件结构

```
dmy-cloud-upload/
├── dmy-link.php              # 主插件文件
├── includes/
│   ├── admin-settings.php    # 管理设置页面
│   └── cloud-upload.php      # 云盘上传核心功能
├── js/
│   └── cloud-upload.js       # 前端交互脚本
├── css/
│   └── cloud-upload.css      # 样式文件
├── README.md                 # 说明文档
├── QUICK_START.md            # 快速开始指南
└── LICENSE                   # 开源协议
```

## 系统要求

- **WordPress**: 5.0 或更高版本
- **PHP**: 7.4 或更高版本
- **扩展**: cURL 支持
- **权限**: 文件读写权限
- **网络**: 能够访问云盘API

## 更新日志

### v1.2.0 (当前版本)
- 🔧 重要修复：解决重复上传和本地文件管理问题
- ✅ 修复重复上传：解决图片上传时生成两张图片的问题
- ✅ 本地文件管理：修复"不保存副本"功能不生效的问题
- ✅ 安全删除机制：多重验证确保删除操作安全
- ✅ 状态管理工具：完整的文件状态检查和统计
- ✅ 修复工具：专用的问题检查和修复工具
- ✅ 用户体验：改进设置说明和操作反馈
- ✅ 批量操作：支持暂停、继续和详细进度显示

### v1.1.0
- 🎉 全文件类型支持：支持90+种文件格式
- ✅ APK文件支持：特别支持Android应用包
- ✅ PHP兼容性：完全兼容PHP 7.0-8.x
- ✅ GitHub更新：自动检测和一键更新功能

## 技术支持

### 获取帮助
- **作者网站**: [www.09cdn.com](https://www.09cdn.com)
- **问题反馈**: 通过网站联系表单
- **使用文档**: 查看 `QUICK_START.md` 快速开始指南

### 常见问题
1. **上传失败**: 检查AID/KEY配置和网络连接
2. **链接未替换**: 确认文件已成功上传到云盘
3. **批量处理中断**: 检查服务器性能和网络稳定性

## 开源协议

本插件基于 GPL v3 协议开源，您可以自由使用、修改和分发。

## 致谢

感谢所有使用和支持本插件的用户，您的反馈让插件变得更好！

---

**享受云盘加速带来的更好体验！** 🚀
